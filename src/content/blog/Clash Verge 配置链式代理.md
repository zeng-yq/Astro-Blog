---
title: "Clash Verge é…ç½®é“¾å¼ä»£ç†ï¼ˆè¶…çº§ç®€å•ï¼‰"
categories: ç½‘ç»œ
tags: ["ç½‘ç»œ", "åˆ›ä¸š", "è·¨å¢ƒ"]
id: "clash-verge-chain-proxy"
date: 2026-01-05 18:18:18
cover: "/assets/images/article-clash-verge-chain-proxy/clash-verge-chain-proxy.webp"
recommend: true
top: false
---

:::note{type="success"}
ç®€å•å‡ ä¸ªæ­¥éª¤å³å¯å®žçŽ° Clash Verge çš„é“¾å¼ä»£ç†é…ç½®ã€‚é€šè¿‡ JavaScript è„šæœ¬åˆ›å»ºå¤šå±‚ä»£ç†è½¬å‘ï¼Œå®žçŽ°æ›´çµæ´»çš„ç½‘ç»œä»£ç†æ–¹æ¡ˆã€‚é€‚ç”¨äºŽéœ€è¦å›ºå®š IP åœ°å€è¿›è¡Œè·¨å¢ƒç”µå•†ã€ç‹¬ç«‹å¼€å‘ç­‰åœºæ™¯ã€‚
:::

## ä¸€ã€è´­ä¹°é™æ€ IP

::btn[Cliproxy è´­ä¹°åœ°å€]{link="https://share.cliproxy.com/share/4qnp7bc5e" type="import"}

æœ¬æ–‡ä½¿ç”¨ Cliproxy è´­ä¹°çš„é•¿æ•ˆé™æ€ ISP IP è¿›è¡Œæ¼”ç¤ºã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æœåŠ¡å•†ï¼ŒåŽç»­é…ç½®æ­¥éª¤åŸºæœ¬ä¸€è‡´ã€‚

å®Œæˆè´­ä¹°åŽï¼Œè¯·å¦¥å–„è®°å½•ä»¥ä¸‹è¿žæŽ¥ä¿¡æ¯ï¼š

- æœåŠ¡å™¨ IP åœ°å€
- ç«¯å£å·
- ç”¨æˆ·å
- å¯†ç 

![Cliproxy è´­ä¹°ä¿¡æ¯](/assets/images/article-clash-verge-chain-proxy/cliproxy-purchase-info.png)

## äºŒã€ç†è§£é“¾å¼ä»£ç†åŽŸç†

åœ¨å¼€å§‹é…ç½®å‰ï¼Œå…ˆç†è§£é“¾å¼ä»£ç†çš„å·¥ä½œåŽŸç†ï¼Œè¿™å°†å¸®åŠ©ä½ æ›´å¥½åœ°æŽŒæ¡åŽç»­é…ç½®æ­¥éª¤ã€‚

é“¾å¼ä»£ç†é€šè¿‡ Clash çš„ `dialer-proxy` å­—æ®µå®žçŽ°å¤šå±‚ä»£ç†è½¬å‘ï¼Œæµé‡è·¯å¾„å¦‚ä¸‹ï¼š

```
æœ¬åœ°è®¡ç®—æœº â†’ æœºåœºèŠ‚ç‚¹ â†’ é™æ€ IP â†’ ç›®æ ‡ç½‘ç«™
```

**æ ¸å¿ƒé€»è¾‘**ï¼š

1. **ä¿ç•™æ‰€æœ‰æœºåœºèŠ‚ç‚¹**ï¼šå°†è®¢é˜…ä¸­çš„æ‰€æœ‰æœºåœºèŠ‚ç‚¹ç»Ÿä¸€æ”¾å…¥ã€Œæœºåœºä¸­è½¬æ± ã€
2. **æ–°å¢žé™æ€ IP èŠ‚ç‚¹**ï¼šå°†è´­ä¹°çš„é™æ€ IP é…ç½®ä¸ºç‹¬ç«‹èŠ‚ç‚¹ï¼Œå¹¶è®¾ç½®å…¶ä¸Šæ¸¸ä»£ç†ä¸ºã€Œæœºåœºä¸­è½¬æ± ã€
3. **åˆ›å»ºæœ€ç»ˆå‡ºå£é€‰æ‹©å™¨**ï¼šæä¾›ä¸¤ä¸ªé€‰é¡¹ä¾›çµæ´»åˆ‡æ¢
   - é€‰æ‹©ã€Œæœºåœºä¸­è½¬æ± ã€ï¼šæµé‡ç›´æŽ¥é€šè¿‡æœºåœºèŠ‚ç‚¹å‡ºå¢ƒï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰
   - é€‰æ‹©ã€Œé™æ€ IPã€ï¼šæµé‡é€šè¿‡æœºåœºèŠ‚ç‚¹ä¸­è½¬åˆ°é™æ€ IP å†è®¿é—®ç›®æ ‡ç½‘ç«™ï¼ˆIP å›ºå®šï¼‰

é€šè¿‡è¿™ç§è®¾è®¡ï¼Œä½ å¯ä»¥æ ¹æ®å®žé™…éœ€æ±‚åœ¨ã€Œé€Ÿåº¦ä¼˜å…ˆã€å’Œã€ŒIP å›ºå®šã€ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œéžå¸¸é€‚åˆè·¨å¢ƒç”µå•†è´¦å·ç®¡ç†ã€è‡ªåª’ä½“è¿è¥ç­‰ç‰¹æ®Šä½¿ç”¨åœºæ™¯ã€‚

## ä¸‰ã€é…ç½® Clash Verge

### 1. ç¼–è¾‘å…¨å±€æ‰©å±•è„šæœ¬

åœ¨ Clash Verge ã€Œè®¢é˜…ã€ç•Œé¢ä¸­ï¼ŒåŒå‡»ã€Œå…¨å±€æ‰©å±•è„šæœ¬ã€é€‰é¡¹ï¼š

![åŒå‡»å…¨å±€æ‰©å±•è„šæœ¬](/assets/images/article-clash-verge-chain-proxy/clash-verge-script-extension.png)

### 2. æ·»åŠ é“¾å¼ä»£ç†è„šæœ¬

å°†ä»¥ä¸‹è„šæœ¬ä»£ç ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå¹¶æ ¹æ®ä½ è´­ä¹°çš„é™æ€ IP ä¿¡æ¯ä¿®æ”¹**æ ¸å¿ƒé…ç½®åŒºåŸŸ**çš„å››ä¸ªå­—æ®µã€‚

**éœ€è¦ä¿®æ”¹çš„å­—æ®µ**ï¼š

| å­—æ®µ       | è¯´æ˜Ž               | ç¤ºä¾‹           |
| ---------- | ------------------ | -------------- |
| `server`   | é™æ€ IP æœåŠ¡å™¨åœ°å€ | `123.45.67.89` |
| `port`     | ç«¯å£å·             | `443`          |
| `username` | ç”¨æˆ·å             | `user123`      |
| `password` | å¯†ç                | `pass123`      |

```javascript
function main(config) {
  // ================= 1. æ ¸å¿ƒé…ç½®åŒºåŸŸ =================
  const staticProxyConfig = {
    name: "ðŸ”’ é™æ€IP (å‡ºå£)",
    server: "xxx.xxx.xxx.xxx",
    port: xxx,
    username: "xxxxx",
    password: "xxxxx",
    type: "socks5",
    udp: true,
    "skip-cert-verify": true, // ä¼˜åŒ–ï¼šè·³è¿‡è¯ä¹¦éªŒè¯ï¼Œæé«˜é“¾å¼ä»£ç†è¿žé€šæ€§
  };

  const groupAirportName = "âœˆï¸ æœºåœºä¸­è½¬æ± ";
  const groupFinalName = "ðŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©";

  // ================= 2. è§„åˆ™ä¼˜åŒ– (ä½¿ç”¨ GEOSITE æ›¿ä»£å†—é•¿åˆ—è¡¨) =================
  // ä¼˜åŒ–ç‚¹ 1: ç§»é™¤ç¡¬ç¼–ç çš„å‡ ç™¾ä¸ªåŸŸåï¼Œä½¿ç”¨ Meta å†…æ ¸çš„ GEOSITE æ•°æ®åº“
  const optimizedDirectRules = [
    // --- å¼ºåˆ¶ç›´è¿žä¸Žå±€åŸŸç½‘ ---
    "GEOSITE,private,DIRECT",
    "GEOSITE,category-ads-all,REJECT", // é¡ºä¾¿æ‹¦æˆªä¸€ä¸‹å¹¿å‘Š

    // --- IP æ®µ (æ ¸å¿ƒç½‘ç»œ) ---
    "IP-CIDR,127.0.0.0/8,DIRECT,no-resolve",
    "IP-CIDR,172.16.0.0/12,DIRECT,no-resolve",
    "IP-CIDR,192.168.0.0/16,DIRECT,no-resolve",
    "IP-CIDR,10.0.0.0/8,DIRECT,no-resolve",
    "IP-CIDR,100.64.0.0/10,DIRECT,no-resolve",
    "IP-CIDR,224.0.0.0/4,DIRECT,no-resolve",

    // --- è¿›ç¨‹åŒ¹é… ---
    "PROCESS-NAME,Thunder,DIRECT",
    "PROCESS-NAME,Transmission,DIRECT",
    "PROCESS-NAME,uTorrent,DIRECT",
    "PROCESS-NAME,qBittorrent,DIRECT",
    "PROCESS-NAME,aria2c,DIRECT",

    // --- æ ¸å¿ƒä¼˜åŒ–ï¼šå›½å†…åŸŸåç»Ÿé… ---
    // åŒ…å« baidu, qq, alibaba, apple.cn, microsoft.cn ç­‰æ‰€æœ‰å›½å†…å¸¸è§åŸŸå
    "GEOSITE,cn,DIRECT",

    // --- æ¸¸æˆå¹³å°å›½å†…CDN ---
    "GEOSITE,steam@cn,DIRECT",
    "GEOSITE,category-games@cn,DIRECT",

    // --- å…œåº•å›½å†… IP ---
    "GEOIP,CN,DIRECT",
  ];

  // ================= 3. æå–ä¸Žæž„å»ºèŠ‚ç‚¹ (ä¼˜åŒ–èŠ‚ç‚¹æ¸…æ´—) =================

  // ä¼˜åŒ–ç‚¹ 3: è¿‡æ»¤èŠ‚ç‚¹ï¼ŒæŽ’é™¤ç‰¹æ®ŠèŠ‚ç‚¹å’Œé™æ€IPè‡ªèº«ï¼Œé˜²æ­¢å¾ªçŽ¯å¼•ç”¨
  // åªæå–å‡ºç½‘åè®®èŠ‚ç‚¹ (SS/VMess/Trojan/HTTP/Socks5ç­‰)ï¼ŒæŽ’é™¤ DIRECT/REJECT ç­‰
  const validNodeTypes = [
    "ss",
    "vmess",
    "vless",
    "trojan",
    "hysteria",
    "hysteria2",
    "tuic",
    "ssr",
    "snell",
    "socks5",
    "http",
  ];

  // ç¡®ä¿ config.proxies å­˜åœ¨
  if (!config.proxies) config.proxies = [];

  const airportProxies = config.proxies
    .filter(
      (p) =>
        validNodeTypes.includes(p.type) && p.name !== staticProxyConfig.name
    )
    .map((p) => p.name);

  // é˜²é”™ï¼šå¦‚æžœæ²¡æ‰¾åˆ°ä»»ä½•èŠ‚ç‚¹ï¼Œç»™ä¸€ä¸ª DIRECT é˜²æ­¢æŠ¥é”™
  if (airportProxies.length === 0) airportProxies.push("DIRECT");

  // æ·»åŠ é™æ€ IP (è®¾ç½® dialer-proxy æŒ‡å‘æœºåœºæ± )
  staticProxyConfig["dialer-proxy"] = groupAirportName;
  // ä½¿ç”¨ unshift å°†é™æ€èŠ‚ç‚¹åŠ åˆ°åˆ—è¡¨æœ€å‰ï¼Œæ–¹ä¾¿è°ƒè¯•
  config.proxies.unshift(staticProxyConfig);

  // ================= 4. åˆ†ç»„ç­–ç•¥ä¼˜åŒ– (è‡ªåŠ¨å®¹ç¾) =================

  config["proxy-groups"] = [
    {
      name: groupFinalName,
      type: "select",
      proxies: [
        staticProxyConfig.name, // é»˜è®¤ï¼šèµ°é™æ€IPé“¾å¼ä»£ç†
        groupAirportName, // å¤‡ç”¨ï¼šä¸èµ°é™æ€IPï¼Œç›´æŽ¥èµ°æœºåœº
      ],
    },
    {
      // ä¼˜åŒ–ç‚¹ 2: å°† Select æ”¹ä¸º url-testï¼Œå®žçŽ°è‡ªåŠ¨å®¹ç¾
      // é™æ€ IP ä¾èµ–è¿™ä¸ªæ± å­å‡ºç½‘ï¼Œå¿…é¡»ä¿è¯è¿™ä¸ªæ± å­é‡Œçš„èŠ‚ç‚¹æ°¸è¿œæ˜¯é€šçš„
      name: groupAirportName,
      type: "url-test",
      url: "http://www.gstatic.com/generate_204",
      interval: 300,
      tolerance: 50,
      lazy: true,
      proxies: airportProxies,
    },
  ];

  // ================= 5. è§„åˆ™é€»è¾‘ä¼˜åŒ– (é«˜æ•ˆæ¸…æ´—) =================

  // ä¼˜åŒ–ç‚¹ 4: æ›´é«˜æ•ˆçš„è§„åˆ™åˆå¹¶ä¸Žæ¸…æ´—é€»è¾‘
  const finalRules = [...optimizedDirectRules];

  if (config.rules && config.rules.length > 0) {
    config.rules.forEach((rule) => {
      // å¿«é€Ÿåˆ†å‰²
      const parts = rule.split(",");
      if (parts.length < 2) return;

      const ruleType = parts[0].trim().toUpperCase();
      // èŽ·å–ç­–ç•¥éƒ¨åˆ†ï¼ˆå¤„ç† no-resolve çš„æƒ…å†µï¼‰
      const isNoResolve =
        parts[parts.length - 1].trim().toLowerCase() === "no-resolve";
      const policyIndex = isNoResolve ? parts.length - 2 : parts.length - 1;
      const originalPolicy = parts[policyIndex].trim();

      // é€»è¾‘ï¼šä¿ç•™ DIRECT å’Œ REJECTï¼Œå…¶ä»–çš„å…¨éƒ¨é‡å®šå‘åˆ° groupFinalName
      if (
        originalPolicy === "DIRECT" ||
        originalPolicy === "REJECT" ||
        originalPolicy.startsWith("REJECT")
      ) {
        finalRules.push(rule);
      } else if (ruleType !== "MATCH") {
        // ä¿®æ”¹ç›®æ ‡ç­–ç•¥
        parts[policyIndex] = groupFinalName;
        finalRules.push(parts.join(","));
      }
    });
  }

  // ç¡®ä¿æœ€åŽä¸€æ¡æ˜¯ MATCH ä¸”æŒ‡å‘æœ€ç»ˆåˆ†ç»„
  finalRules.push(`MATCH,${groupFinalName}`);

  // åº”ç”¨æ–°è§„åˆ™
  config.rules = finalRules;

  return config;
}
```

### 3. ä¿å­˜é…ç½®

ç‚¹å‡»ä¿å­˜æŒ‰é’®å®Œæˆé…ç½®ï¼š

![è„šæœ¬é…ç½®ä¿å­˜å®Œæˆ](/assets/images/article-clash-verge-chain-proxy/script-config-saved.png)

## å››ã€éªŒè¯é…ç½®æ•ˆæžœ

### 1. æŸ¥çœ‹æ–°çš„ä»£ç†åˆ†ç»„

åˆ‡æ¢åˆ°ã€Œä»£ç†ã€æ ‡ç­¾é¡µï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸¤ä¸ªæ–°çš„ä»£ç†ç»„ï¼š

- **âœˆï¸ æœºåœºä¸­è½¬æ± **ï¼šåŒ…å«ä½ è®¢é˜…ä¸­çš„æ‰€æœ‰æœºåœºèŠ‚ç‚¹
- **ðŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©**ï¼šåŒ…å«ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€å’Œã€ŒðŸ”’ é™æ€ IP (å‡ºå£)ã€ä¸¤ä¸ªé€‰é¡¹

![ä»£ç†ç»„åˆ›å»ºå®Œæˆ](/assets/images/article-clash-verge-chain-proxy/proxy-groups-created.png)

### 2. ä½¿ç”¨é™æ€ IP å‡ºå£

åœ¨ã€ŒðŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€ä¸­é€‰æ‹©ã€ŒðŸ”’ é™æ€ IP (å‡ºå£)ã€ï¼Œæµé‡å°†æŒ‰ç…§ä»¥ä¸‹è·¯å¾„è½¬å‘ï¼š

```
æœ¬åœ°è®¡ç®—æœº â†’ æœºåœºèŠ‚ç‚¹ â†’ é™æ€ IP èŠ‚ç‚¹ â†’ ç›®æ ‡ç½‘ç«™
```

![ä½¿ç”¨é™æ€ IP è¿›è¡Œä¸­è½¬](/assets/images/article-clash-verge-chain-proxy/use-static-ip-proxy.png)

### 3. éªŒè¯ IP åœ°å€

è®¿é—® [IPPure](https://ippure.com/) æˆ– [Ping0](https://ping0.cc/) æ£€æµ‹å½“å‰ IP åœ°å€ã€‚

å¦‚æžœæ˜¾ç¤ºçš„æ˜¯ä½ è´­ä¹°çš„é™æ€ IP åœ°å€ï¼Œè¯´æ˜Žé…ç½®æˆåŠŸï¼

![IP æ£€æµ‹ç»“æžœæ˜¾ç¤ºé™æ€ IP](/assets/images/article-clash-verge-chain-proxy/ip-detection-result.png)

ä½ ä¹Ÿå¯ä»¥åœ¨ Clash Verge çš„è¿è¡Œæ—¥å¿—ä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œç¡®è®¤é…ç½®æ­£å¸¸å·¥ä½œï¼š

![Clash Verge è¿è¡Œæ—¥å¿—](/assets/images/article-clash-verge-chain-proxy/clash-verge-run-log.png)

### 4. åˆ‡æ¢å›žæœºåœºç›´è¿žæ¨¡å¼

å¦‚éœ€ç›´æŽ¥ä½¿ç”¨æœºåœºèŠ‚ç‚¹ï¼ˆä¸ç»è¿‡é™æ€ IPï¼‰ï¼Œåœ¨ã€ŒðŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€ä¸­é€‰æ‹©ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ï¼Œç„¶åŽåœ¨ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ä¸­é€‰æ‹©å…·ä½“çš„èŠ‚ç‚¹å³å¯ï¼š

![ç›´æŽ¥ä½¿ç”¨æœºåœºèŠ‚ç‚¹](/assets/images/article-clash-verge-chain-proxy/use-airport-direct.png)

## äº”ã€ä½¿ç”¨åœºæ™¯å»ºè®®

é€šè¿‡è¿™ç§é…ç½®ï¼Œä½ å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯çµæ´»åˆ‡æ¢ï¼š

- **è·¨å¢ƒç”µå•†è´¦å·ç®¡ç†**ï¼šä½¿ç”¨ã€ŒðŸ”’ é™æ€ IP (å‡ºå£)ã€ï¼Œä¿æŒå›ºå®š IP åœ°å€ï¼Œé¿å…è§¦å‘å¹³å°é£ŽæŽ§
- **ä¸€èˆ¬æµè§ˆè®¿é—®**ï¼šä½¿ç”¨ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ï¼ŒèŽ·å¾—æ›´å¿«çš„è®¿é—®é€Ÿåº¦ï¼ˆä¾‹å¦‚åˆ· Youtube è§†é¢‘ï¼‰

é€šè¿‡ã€ŒðŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€åˆ†ç»„ï¼Œä½ å¯ä»¥éšæ—¶åœ¨ä¸¤ç§æ¨¡å¼é—´å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€ä¿®æ”¹é…ç½®ã€‚
