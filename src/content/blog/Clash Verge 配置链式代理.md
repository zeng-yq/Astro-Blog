---
title: "Clash Verge é…ç½®é“¾å¼ä»£ç†ï¼ˆè¶…çº§ç®€å•ï¼‰"
categories: ç½‘ç»œ
tags: ["ç½‘ç»œ", "åˆ›ä¸š", "è·¨å¢ƒ"]
id: "clash-verge-chain-proxy"
date: 2026-01-05 18:18:18
cover: "/assets/images/article-clash-verge-chain-proxy/clash-verge-chain-proxy.webp"
recommend: true
top: false
---

:::note{type="success"}
ç®€å•å‡ ä¸ªæ­¥éª¤å³å¯å®ç° Clash Verge çš„é“¾å¼ä»£ç†é…ç½®ã€‚é€šè¿‡ JavaScript è„šæœ¬åˆ›å»ºå¤šå±‚ä»£ç†è½¬å‘ï¼Œå®ç°æ›´çµæ´»çš„ç½‘ç»œä»£ç†æ–¹æ¡ˆã€‚é€‚ç”¨äºéœ€è¦å›ºå®š IP åœ°å€è¿›è¡Œè·¨å¢ƒç”µå•†ã€ç‹¬ç«‹å¼€å‘ç­‰åœºæ™¯ã€‚
:::

## ä¸€ã€è´­ä¹°é™æ€ IP

::btn[Cliproxy è´­ä¹°åœ°å€]{link="https://share.cliproxy.com/share/4qnp7bc5e" type="import"}

æœ¬æ–‡ä½¿ç”¨ Cliproxy è´­ä¹°çš„é•¿æ•ˆé™æ€ ISP IP è¿›è¡Œæ¼”ç¤ºã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æœåŠ¡å•†ï¼Œåç»­é…ç½®æ­¥éª¤åŸºæœ¬ä¸€è‡´ã€‚

å®Œæˆè´­ä¹°åï¼Œè¯·å¦¥å–„è®°å½•ä»¥ä¸‹è¿æ¥ä¿¡æ¯ï¼š

- æœåŠ¡å™¨ IP åœ°å€
- ç«¯å£å·
- ç”¨æˆ·å
- å¯†ç 

![Cliproxy è´­ä¹°ä¿¡æ¯](/assets/images/article-clash-verge-chain-proxy/cliproxy-purchase-info.png)

## äºŒã€ç†è§£é“¾å¼ä»£ç†åŸç†

åœ¨å¼€å§‹é…ç½®å‰ï¼Œå…ˆç†è§£é“¾å¼ä»£ç†çš„å·¥ä½œåŸç†ï¼Œè¿™å°†å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡åç»­é…ç½®æ­¥éª¤ã€‚

é“¾å¼ä»£ç†é€šè¿‡ Clash çš„ `dialer-proxy` å­—æ®µå®ç°å¤šå±‚ä»£ç†è½¬å‘ï¼Œæµé‡è·¯å¾„å¦‚ä¸‹ï¼š

```
æœ¬åœ°è®¡ç®—æœº â†’ æœºåœºèŠ‚ç‚¹ â†’ é™æ€ IP â†’ ç›®æ ‡ç½‘ç«™
```

**æ ¸å¿ƒé€»è¾‘**ï¼š

1. **ä¿ç•™æ‰€æœ‰æœºåœºèŠ‚ç‚¹**ï¼šå°†è®¢é˜…ä¸­çš„æ‰€æœ‰æœºåœºèŠ‚ç‚¹ç»Ÿä¸€æ”¾å…¥ã€Œæœºåœºä¸­è½¬æ± ã€
2. **æ–°å¢é™æ€ IP èŠ‚ç‚¹**ï¼šå°†è´­ä¹°çš„é™æ€ IP é…ç½®ä¸ºç‹¬ç«‹èŠ‚ç‚¹ï¼Œå¹¶è®¾ç½®å…¶ä¸Šæ¸¸ä»£ç†ä¸ºã€Œæœºåœºä¸­è½¬æ± ã€
3. **åˆ›å»ºæœ€ç»ˆå‡ºå£é€‰æ‹©å™¨**ï¼šæä¾›ä¸¤ä¸ªé€‰é¡¹ä¾›çµæ´»åˆ‡æ¢
   - é€‰æ‹©ã€Œæœºåœºä¸­è½¬æ± ã€ï¼šæµé‡ç›´æ¥é€šè¿‡æœºåœºèŠ‚ç‚¹å‡ºå¢ƒï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰
   - é€‰æ‹©ã€Œé™æ€ IPã€ï¼šæµé‡é€šè¿‡æœºåœºèŠ‚ç‚¹ä¸­è½¬åˆ°é™æ€ IP å†è®¿é—®ç›®æ ‡ç½‘ç«™ï¼ˆIP å›ºå®šï¼‰

é€šè¿‡è¿™ç§è®¾è®¡ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚åœ¨ã€Œé€Ÿåº¦ä¼˜å…ˆã€å’Œã€ŒIP å›ºå®šã€ä¹‹é—´çµæ´»åˆ‡æ¢ï¼Œéå¸¸é€‚åˆè·¨å¢ƒç”µå•†è´¦å·ç®¡ç†ã€è‡ªåª’ä½“è¿è¥ç­‰ç‰¹æ®Šä½¿ç”¨åœºæ™¯ã€‚

## ä¸‰ã€é…ç½® Clash Verge

### 1. ç¼–è¾‘å…¨å±€æ‰©å±•è„šæœ¬

åœ¨ Clash Verge ã€Œè®¢é˜…ã€ç•Œé¢ä¸­ï¼ŒåŒå‡»ã€Œå…¨å±€æ‰©å±•è„šæœ¬ã€é€‰é¡¹ï¼š

![åŒå‡»å…¨å±€æ‰©å±•è„šæœ¬](/assets/images/article-clash-verge-chain-proxy/clash-verge-script-extension.png)

### 2. æ·»åŠ é“¾å¼ä»£ç†è„šæœ¬

å°†ä»¥ä¸‹è„šæœ¬ä»£ç ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå¹¶æ ¹æ®ä½ è´­ä¹°çš„é™æ€ IP ä¿¡æ¯ä¿®æ”¹**æ ¸å¿ƒé…ç½®åŒºåŸŸ**çš„å››ä¸ªå­—æ®µã€‚

**éœ€è¦ä¿®æ”¹çš„å­—æ®µ**ï¼š

| å­—æ®µ       | è¯´æ˜               | ç¤ºä¾‹           |
| ---------- | ------------------ | -------------- |
| `server`   | é™æ€ IP æœåŠ¡å™¨åœ°å€ | `123.45.67.89` |
| `port`     | ç«¯å£å·             | `443`          |
| `username` | ç”¨æˆ·å             | `user123`      |
| `password` | å¯†ç                | `pass123`      |

```javascript
function main(config) {
  // ================= æ ¸å¿ƒé…ç½®åŒºåŸŸï¼ˆéœ€è¦ä¿®æ”¹ï¼‰ =================
  const staticProxyConfig = {
    name: "ğŸ”’ é™æ€IP (å‡ºå£)",
    server: "xxxx.xxxx.xxxx.xxxx", // æ›¿æ¢ä¸ºä½ çš„é™æ€ IP åœ°å€
    port: xxx, // æ›¿æ¢ä¸ºä½ çš„ç«¯å£å·
    username: "xxxxxx", // æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å
    password: "xxxxxx", // æ›¿æ¢ä¸ºä½ çš„å¯†ç 
    type: "socks5",
    udp: true,
  };
  // =========================================================

  const groupAirportName = "âœˆï¸ æœºåœºä¸­è½¬æ± ";
  const groupFinalName = "ğŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©";

  // 1. æå–æ‰€æœ‰æœºåœºèŠ‚ç‚¹
  const allProxies = config.proxies.map((p) => p.name);

  // 2. æ·»åŠ é™æ€ IP èŠ‚ç‚¹ï¼ˆé“¾å¼æŒ‡å‘æœºåœºä¸­è½¬æ± ï¼‰
  staticProxyConfig["dialer-proxy"] = groupAirportName;
  config.proxies.push(staticProxyConfig);

  // 3. é‡ç½®ä»£ç†åˆ†ç»„ï¼ˆåªä¿ç•™ä¸¤ä¸ªæ ¸å¿ƒåˆ†ç»„ï¼‰
  config["proxy-groups"] = [
    {
      name: groupAirportName,
      type: "select",
      proxies: allProxies,
    },
    {
      name: groupFinalName,
      type: "select",
      proxies: [
        groupAirportName, // é€‰é¡¹ 1: æœºåœºç›´è¿
        staticProxyConfig.name, // é€‰é¡¹ 2: ç»è¿‡é™æ€ IP
      ],
    },
  ];

  // 4. æ¸…æ´—å¹¶æ›´æ–°æ‰€æœ‰è§„åˆ™
  if (config.rules && config.rules.length > 0) {
    const newRules = config.rules.map((rule) => {
      const parts = rule.split(",");

      // ç¡®å®šç­–ç•¥ç»„åç§°çš„ä½ç½®ï¼ˆå¤„ç†å¸¦æœ‰ no-resolve çš„æƒ…å†µï¼‰
      let policyIndex = parts.length - 1;
      if (parts[parts.length - 1].trim() === "no-resolve") {
        policyIndex = parts.length - 2;
      }

      // å°†é DIRECT å’Œé REJECT çš„è§„åˆ™æŒ‡å‘æœ€ç»ˆå‡ºå£åˆ†ç»„
      const currentPolicy = parts[policyIndex];
      if (
        !currentPolicy.startsWith("DIRECT") &&
        !currentPolicy.startsWith("REJECT")
      ) {
        parts[policyIndex] = groupFinalName;
      }

      return parts.join(",");
    });

    // ç¡®ä¿æœ‰å…œåº•è§„åˆ™
    if (
      newRules.length === 0 ||
      !newRules[newRules.length - 1].startsWith("MATCH")
    ) {
      newRules.push(`MATCH,${groupFinalName}`);
    }

    config.rules = newRules;
  } else {
    // å¦‚æœæ²¡æœ‰è§„åˆ™ï¼Œæ·»åŠ å…œåº•è§„åˆ™
    config.rules = [`MATCH,${groupFinalName}`];
  }

  return config;
}
```

### 3. ä¿å­˜é…ç½®

ç‚¹å‡»ä¿å­˜æŒ‰é’®å®Œæˆé…ç½®ï¼š

![è„šæœ¬é…ç½®ä¿å­˜å®Œæˆ](/assets/images/article-clash-verge-chain-proxy/script-config-saved.png)

## å››ã€éªŒè¯é…ç½®æ•ˆæœ

### 1. æŸ¥çœ‹æ–°çš„ä»£ç†åˆ†ç»„

åˆ‡æ¢åˆ°ã€Œä»£ç†ã€æ ‡ç­¾é¡µï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸¤ä¸ªæ–°çš„ä»£ç†ç»„ï¼š

- **âœˆï¸ æœºåœºä¸­è½¬æ± **ï¼šåŒ…å«ä½ è®¢é˜…ä¸­çš„æ‰€æœ‰æœºåœºèŠ‚ç‚¹
- **ğŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©**ï¼šåŒ…å«ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€å’Œã€ŒğŸ”’ é™æ€ IP (å‡ºå£)ã€ä¸¤ä¸ªé€‰é¡¹

![ä»£ç†ç»„åˆ›å»ºå®Œæˆ](/assets/images/article-clash-verge-chain-proxy/proxy-groups-created.png)

### 2. ä½¿ç”¨é™æ€ IP å‡ºå£

åœ¨ã€ŒğŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€ä¸­é€‰æ‹©ã€ŒğŸ”’ é™æ€ IP (å‡ºå£)ã€ï¼Œæµé‡å°†æŒ‰ç…§ä»¥ä¸‹è·¯å¾„è½¬å‘ï¼š

```
æœ¬åœ°è®¡ç®—æœº â†’ æœºåœºèŠ‚ç‚¹ â†’ é™æ€ IP èŠ‚ç‚¹ â†’ ç›®æ ‡ç½‘ç«™
```

![ä½¿ç”¨é™æ€ IP è¿›è¡Œä¸­è½¬](/assets/images/article-clash-verge-chain-proxy/use-static-ip-proxy.png)

### 3. éªŒè¯ IP åœ°å€

è®¿é—® [IPPure](https://ippure.com/) æˆ– [Ping0](https://ping0.cc/) æ£€æµ‹å½“å‰ IP åœ°å€ã€‚

å¦‚æœæ˜¾ç¤ºçš„æ˜¯ä½ è´­ä¹°çš„é™æ€ IP åœ°å€ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

![IP æ£€æµ‹ç»“æœæ˜¾ç¤ºé™æ€ IP](/assets/images/article-clash-verge-chain-proxy/ip-detection-result.png)

ä½ ä¹Ÿå¯ä»¥åœ¨ Clash Verge çš„è¿è¡Œæ—¥å¿—ä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œç¡®è®¤é…ç½®æ­£å¸¸å·¥ä½œï¼š

![Clash Verge è¿è¡Œæ—¥å¿—](/assets/images/article-clash-verge-chain-proxy/clash-verge-run-log.png)

### 4. åˆ‡æ¢å›æœºåœºç›´è¿æ¨¡å¼

å¦‚éœ€ç›´æ¥ä½¿ç”¨æœºåœºèŠ‚ç‚¹ï¼ˆä¸ç»è¿‡é™æ€ IPï¼‰ï¼Œåœ¨ã€ŒğŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€ä¸­é€‰æ‹©ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ï¼Œç„¶ååœ¨ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ä¸­é€‰æ‹©å…·ä½“çš„èŠ‚ç‚¹å³å¯ï¼š

![ç›´æ¥ä½¿ç”¨æœºåœºèŠ‚ç‚¹](/assets/images/article-clash-verge-chain-proxy/use-airport-direct.png)

## äº”ã€ä½¿ç”¨åœºæ™¯å»ºè®®

é€šè¿‡è¿™ç§é…ç½®ï¼Œä½ å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯çµæ´»åˆ‡æ¢ï¼š

- **è·¨å¢ƒç”µå•†è´¦å·ç®¡ç†**ï¼šä½¿ç”¨ã€ŒğŸ”’ é™æ€ IP (å‡ºå£)ã€ï¼Œä¿æŒå›ºå®š IP åœ°å€ï¼Œé¿å…è§¦å‘å¹³å°é£æ§
- **ä¸€èˆ¬æµè§ˆè®¿é—®**ï¼šä½¿ç”¨ã€Œâœˆï¸ æœºåœºä¸­è½¬æ± ã€ï¼Œè·å¾—æ›´å¿«çš„è®¿é—®é€Ÿåº¦ï¼ˆä¾‹å¦‚åˆ· Youtube è§†é¢‘ï¼‰

é€šè¿‡ã€ŒğŸš€ æœ€ç»ˆå‡ºå£é€‰æ‹©ã€åˆ†ç»„ï¼Œä½ å¯ä»¥éšæ—¶åœ¨ä¸¤ç§æ¨¡å¼é—´å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€ä¿®æ”¹é…ç½®ã€‚
